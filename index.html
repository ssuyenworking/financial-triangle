<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç†è²¡é‡‘ä¸‰è§’ï½œè²¡å‹™çµæ§‹æª¢è¦–å ±å‘Š</title>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- html2pdf -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

<style>
body { font-family: system-ui; background:#f7f8fa; padding:16px; }
h1{text-align:center;}
.subtitle{text-align:center;color:#555;margin-top:-6px;}
.desc{text-align:center;color:#888;font-size:14px;margin-bottom:12px;}
.card{background:#fff;border-radius:12px;padding:16px;margin-bottom:16px;box-shadow:0 2px 8px rgba(0,0,0,0.05);}
label{display:block;margin-top:12px;font-weight:600;}
input,select,button{width:100%;padding:10px;margin-top:6px;font-size:16px;}
.primary{background:#1f6fff;color:#fff;border:none;border-radius:8px;}
.cta{background:#e53935;color:#fff;border:none;border-radius:8px;margin-top:12px;}
.secondary{background:#4caf50;color:#fff;border:none;border-radius:8px;margin-top:8px;}
.reset{background:#9e9e9e;color:#fff;border:none;border-radius:8px;margin-top:8px;}
.switch-group{display:flex;gap:8px;}
.switch-btn{flex:1;padding:12px;border-radius:8px;border:1px solid #ccc;background:#f2f2f2;}
.switch-btn.active{background:#1f6fff;color:#fff;border-color:#1f6fff;}
.result{font-size:18px;line-height:1.6;margin-top:12px}

/* Modal */
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);}
.modal-content{background:#fff;margin:10% auto;padding:20px;border-radius:12px;width:90%;max-width:420px;}
.option-btn{margin-top:8px;border-radius:8px;border:1px solid #ccc;background:#f7f7f7;}
.small-note{font-size:13px;color:#777;margin-top:12px;}
</style>
</head>

<body>

<h1>ç†è²¡é‡‘ä¸‰è§’</h1>
<div class="subtitle">å¿«é€Ÿçœ‹æ‡‚ä½ çš„è²¡å‹™çµæ§‹</div>
<div class="desc">ä¸æ˜¯æŠ•è³‡æ¨¡å‹ï¼Œåªç”¨ä¾†æª¢è¦–çµæ§‹æ˜¯å¦å®‰å…¨</div>

<div class="card">
<label>ä½ ç›®å‰çš„ç‹€æ…‹</label>
<div class="switch-group">
<button id="btnStudent" class="switch-btn active" onclick="setUserType('student')">ğŸ“ å­¸ç”Ÿ / å‰›å‡ºç¤¾æœƒ</button>
<button id="btnWorker" class="switch-btn" onclick="setUserType('worker')">ğŸ’¼ ä¸€èˆ¬ä¸Šç­æ—</button>
</div>

<label>æœˆå‰©é¤˜ï¼ˆå¯æ”¯é…æ‰€å¾—ï¼‰</label>
<input type="number" id="remaining">

<label>æ˜¯å¦æœ‰å„²è“„ï¼ˆå‚™ç”¨é‡‘ï¼‰</label>
<select id="saving">
<option value="none">æ²’æœ‰</option>
<option value="some">æœ‰ä¸€é»</option>
<option value="stable">å¯æ”¯æ’ä¸€æ®µæ™‚é–“</option>
</select>

<label>æ˜¯å¦æœ‰ 3â€“5 å¹´å…§çš„é‡è¦ç›®æ¨™</label>
<select id="goal">
<option value="no">æ²’æœ‰</option>
<option value="yes">æœ‰</option>
</select>

<label>æ˜¯å¦æœ‰æŠ•è³‡</label>
<select id="investment">
<option value="none">æ²’æœ‰</option>
<option value="yes">æœ‰</option>
</select>

<label>ä¿éšªç‹€æ…‹</label>
<select id="insurance">
<option value="none">æ²’æœ‰</option>
<option value="partial">ä¸å®Œæ•´</option>
<option value="basic">åŸºæœ¬ä¿éšœå®Œæ•´</option>
</select>

<button class="primary" onclick="analyze()">åˆ†ææˆ‘çš„ç†è²¡é‡‘ä¸‰è§’</button>
</div>

<!-- å ±å‘Šå€ -->
<div class="card" id="report">
<canvas id="triangleChart"></canvas>
<div id="summary" class="result"></div>
<div id="focusResult" class="result"></div>
<p class="small-note">
æœ¬å ±å‘Šåƒ…ç‚ºè²¡å‹™çµæ§‹æª¢è¦–ï¼Œä¸æ¶‰åŠå•†å“ã€é‡‘é¡æˆ–æŠ•è³‡å ±é…¬å»ºè­°ã€‚
</p>
</div>

<button class="cta" onclick="openModal()">é–‹å§‹åŸºæœ¬ä¿éšœé…ç½®èªªæ˜</button>
<button class="secondary" onclick="downloadPDF()">ä¸‹è¼‰æœ¬æ¬¡åˆ†æå ±å‘Šï¼ˆPDFï¼‰</button>
<button class="reset" onclick="resetAll()">é‡è¨­ï¼ä¸‹ä¸€ä½å®¢æˆ¶</button>

<!-- Modal -->
<div id="modal" class="modal">
<div class="modal-content">
<h3>å¦‚æœåªèƒ½å…ˆé¡§å¥½ä¸€ä»¶äº‹ï¼Œä½ ç¾åœ¨æœ€åœ¨æ„å“ªä¸€å¡Šï¼Ÿ</h3>

<button class="option-btn" onclick="selectFocus('life')">ç”Ÿæ´»ä¸ä¸­æ–·</button>
<button class="option-btn" onclick="selectFocus('family')">ä¸æ‹–ç´¯å®¶äºº</button>
<button class="option-btn" onclick="selectFocus('future')">æœªä¾†è¨ˆç•«ä¸è¢«æ‰“æ–·</button>

<p id="talkCard" style="margin-top:12px;"></p>
<button class="primary" onclick="closeModal()">äº†è§£ï¼Œé–‹å§‹èªªæ˜</button>
</div>
</div>

<script>
let chart;
let userType="student";
let focusText="";

function setUserType(type){
userType=type;
btnStudent.classList.remove("active");
btnWorker.classList.remove("active");
(type==="student"?btnStudent:btnWorker).classList.add("active");
}

function analyze(){
let safety=insurance.value==="basic"?3:insurance.value==="partial"?2:1;
let preparation=2;
if(userType==="student"){
if(saving.value==="none")preparation=1;
if(saving.value==="stable")preparation=3;
}else{
if(remaining.value<=0)preparation=1;
if(remaining.value>0&&saving.value!=="none"&&goal.value==="yes")preparation=3;
}
let growth=investment.value==="yes"?3:2;

if(chart)chart.destroy();
chart=new Chart(triangleChart,{type:"radar",data:{labels:["å®‰å…¨","æº–å‚™","æˆé•·"],datasets:[{data:[safety,preparation,growth]}]},options:{plugins:{legend:{display:false}},scales:{r:{min:0,max:3,ticks:{display:false}}}});

summary.innerText=safety===1
?"ç›®å‰æœ€é‡è¦çš„æ˜¯ç¢ºä¿ç™¼ç”Ÿç‹€æ³æ™‚ï¼Œç”Ÿæ´»èˆ‡æ”¶å…¥ä¸æœƒè¢«æ‰“æ–·ã€‚"
:"ä½ çš„è²¡å‹™çµæ§‹å·²æœ‰åŸºç¤ï¼Œå¯ä»¥ä¸€æ­¥ä¸€æ­¥ä¾†ã€‚";
}

function openModal(){modal.style.display="block";}
function closeModal(){modal.style.display="none";}

function selectFocus(type){
if(userType==="student"){
focusText=type==="life"
?"ä½ é¸æ“‡çš„æ˜¯ï¼šç”Ÿæ´»ä¸ä¸­æ–·ã€‚é‡é»æ˜¯é¿å…æ„å¤–å½±éŸ¿å­¸æ¥­èˆ‡ç”Ÿæ´»ã€‚"
:type==="family"
?"ä½ é¸æ“‡çš„æ˜¯ï¼šä¸æ‹–ç´¯å®¶äººã€‚é‡é»æ˜¯å…ˆé¡§å¥½åŸºæœ¬é¢¨éšªã€‚"
:"ä½ é¸æ“‡çš„æ˜¯ï¼šæœªä¾†è¨ˆç•«ä¸è¢«æ‰“æ–·ã€‚å…ˆç¢ºä¿é¢¨éšªä¸å½±éŸ¿é¸æ“‡ã€‚";
}else{
focusText=type==="life"
?"ä½ é¸æ“‡çš„æ˜¯ï¼šç”Ÿæ´»ä¸ä¸­æ–·ã€‚ç¢ºä¿æ”¶å…¥èˆ‡é†«ç™‚ç‹€æ³æ™‚èƒ½ç¶­æŒç”Ÿæ´»ã€‚"
:type==="family"
?"ä½ é¸æ“‡çš„æ˜¯ï¼šä¸æ‹–ç´¯å®¶äººã€‚é‡é»åœ¨è²¬ä»»é¢¨éšªçš„æ‰¿æ“”ã€‚"
:"ä½ é¸æ“‡çš„æ˜¯ï¼šæœªä¾†è¨ˆç•«ä¸è¢«æ‰“æ–·ã€‚é¿å…ä¸€æ¬¡äº‹ä»¶æ‰“äº‚åŠªåŠ›ã€‚";
}
talkCard.innerText=focusText;
focusResult.innerText=focusText;
}

function downloadPDF(){
const opt={margin:0.8,filename:"ç†è²¡é‡‘ä¸‰è§’_çµæ§‹æª¢è¦–å ±å‘Š.pdf",html2canvas:{scale:2},jsPDF:{unit:"cm",format:"a4"}};
html2pdf().set(opt).from(document.getElementById("report")).save();
}

function resetAll(){
remaining.value="";
saving.value="none";
goal.value="no";
investment.value="none";
insurance.value="none";
summary.innerText="";
focusResult.innerText="";
talkCard.innerText="";
if(chart){chart.destroy();chart=null;}
setUserType("student");
modal.style.display="none";
}
</script>

</body>
</html>
